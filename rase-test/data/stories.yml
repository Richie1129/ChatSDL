version: "3.1"

stories:

- story: greet
  steps:
  - intent: greet
  - action: utter_greet

# - story: topic discussion for more info
#   steps:
#   - intent: topic_check
#   - action: utter_topic

  # - action: action_rag_abstract_explain
  # - intent: idea_check
  # - action: utter_curiosity
  # - action: action_topic_response
  # - intent: user_responds_to_topic
  # - action: action_topic_response

# - story: topic discussion no idea
#   steps:
#   - intent: topic_check
#   - action: utter_topic
  # - action: action_rag_abstract_explain
  # - intent: no_idea_check
  # - action: action_save_subtopic
 
# - story: system persona followed by idea discussion
#   steps:
#   - intent: idea_check
#   - action: action_idea_response
- story: No Idea
  steps:
  - intent: no_idea_for_decision_tree
  - action: utter_no_idea_check
  - action: action_start_decision_tree

# 判斷研究問題好壞
- story: Detect science fair question quality
  steps:
  - intent: submit_science_fair_question
  - action: action_evaluate_science_fair_question
  - intent: good_science_fair_question
  - action: utter_good_question_detected
  - intent: bad_science_fair_question
  - action: utter_bad_question_detected

- story: Chemistry topic selection
  steps:
    - intent: choose_discipline
      entities:
          - science_discipline: "chemistry"
    - action: action_save_science_discipline
    - intent: choose_chemistry_topic
    - action: action_explore_chemistry_topic
    - intent: choose_subtopic
    - action: action_save_subtopic
    - action: action_reset_subtopic  # 讓Rasa等待下一個用戶輸入並判斷意圖

- story: Physics topic selection
  steps:
    - intent: choose_discipline
      entities:
        - science_discipline: "physics"
    - action: action_save_science_discipline
    - intent: choose_physics_topic
    - action: action_explore_physics_topic
    - intent: choose_subtopic
    - action: action_save_subtopic
    - action: action_reset_subtopic  # 讓Rasa等待下一個用戶輸入並判斷意圖

- story: Biology topic selection
  steps:
    - intent: choose_discipline
      entities:
        - science_discipline: "biology"
    - action: action_save_science_discipline
    - intent: choose_biology_topic
    - action: action_explore_biology_topic
    - intent: choose_subtopic
    - action: action_save_subtopic
    - action: action_reset_subtopic  # 讓Rasa等待下一個用戶輸入並判斷意圖
    
- story: Earth Science topic selection
  steps:
    - intent: choose_discipline
      entities:
        - science_discipline: "earth_science"
    - action: action_save_science_discipline
    - intent: choose_earth_science_topic
    - action: action_explore_earth_science_topic
    - intent: choose_subtopic
    - action: action_save_subtopic
    - action: action_reset_subtopic  # 讓Rasa等待下一個用戶輸入並判斷意圖

- story: Detailed subtopic exploration for research
  steps:
    - intent: research_subtopic
      entities:
        - subtopic: "{{subtopic}}"
    - action: utter_topic
    # - intent: user_responds_to_topic
    # - action: action_rag_5W1H

- story: more info
  steps:
    - intent: user_responds_to_topic
    - action: action_rag_5W1H
    # - intent: unknown_response
    # - action: action_faq_answering
    # - slot_was_set:
    #     - student_response_quality: "false"
    # - action: action_rag_abstract_explain

- story: 科學名詞定義/為什麼
  steps:
    - intent: definition
    - action: action_rag_abstract_explain


# - story: irrelevant_topic
#   steps:
#   - intent: explore_topic
#   - action: action_irrelevant_topic
